<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lipa Culture Arts and Tourism</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/adminstyle.css') }}">
</head>

<body>
    <div class="wrapper">
        {% include 'admin/admnav.html' %}
        <div class="main">
            <nav class="navbar navbar-expand px-4 py-3">
                <form action="#" class="d-none d-sm-inline-block">
                </form>
                <div class="header--title">
                    <span>Lipa City Culture Arts and Tourism</span>
                    <h2>{{ title }}</h2>
                </div>
                <div class="combine">
                    <div class="clock">
                        <p id="date"></p>
                        <p id="time"></p>
                    </div> 
                </div>   
                <div class="navbar-collapse collapse">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item dropdown">
                            <a href="#" data-bs-toggle="dropdown" class="nav-icon pe-md-0">
                                <img src="{{ url_for('static', filename='assets/' + (user_image if user_image else 'defaultimg.jpg')) }}" alt="" />
                            </a>
                            <div class="dropdown-menu dropdown-menu-end rounded">
                                <a href="{{ url_for('logout') }}">
                                    <span>Logout</span>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="adconfilter">
                <div class="filter">
                    <label for="destination">Filter: </label>
                    <select id="destination" name="destination" onchange="filterResults()" aria-label="Filter by destination">
                        <option value="">Destinations</option>
                        <option value="Amalfi718 Hotel">Amalfi718 Hotel</option>
                        <option value="Andros Lodging">Andros Lodging</option>
                        <option value="Anfa Hotel">Anfa Hotel</option>
                        <option value="Aquamarine Hotel">Aquamarine Hotel</option>
                        <option value="Archbishop Residence">Archbishop Residence</option>
                        <option value="Baryoe Pamilya">Baryoe Pamilya</option>
                        <option value="Base Cafe Steakhouse and Bar">Base Cafe Steakhouse and Bar</option>
                        <option value="Blue Sapphire">Blue Sapphire</option>
                        <option value="Cafe de Lipa">Cafe de Lipa</option>
                        <option value="Casa de Segunda">Casa de Segunda</option>
                        <option value="Casa Marikit Ristorante Italiano">Casa Marikit Ristorante Italiano</option>
                        <option value="Casa Ysabel by Solano">Casa Ysabel by Solano</option>
                        <option value="Chef Chateau">Chef Chateau</option>
                        <option value="Deer Hotel">Deer Hotel</option>
                        <option value="De La Salle Lipa">De La Salle Lipa</option>
                        <option value="Dulli Transient House">Dulli Transient House</option>
                        <option value="D'Ursi Pizza">D'Ursi Pizza</option>
                        <option value="El Grande Residencia Hotel">El Grande Residencia Hotel</option>
                        <option value="Fernando Air Base">Fernando Air Base</option>
                        <option value="Hapag Filipino Restaurant">Hapag Filipino Restaurant</option>
                        <option value="Hotel 1925">Hotel 1925</option>
                        <option value="Hotel ni Mang Jose">Hotel ni Mang Jose</option>
                        <option value="Imprenta Modern Filipino Cuisine">Imprenta Modern Filipino Cuisine</option>
                        <option value="Irori’s Japanese Restaurant">Irori’s Japanese Restaurant</option>
                        <option value="JET Hotel">JET Hotel</option>
                        <option value="Kahariam">Kahariam</option>
                        <option value="Kubli Lodge">Kubli Lodge</option>
                        <option value="Kurvada Motorist">Kurvada Motorist</option>
                        <option value="Liam's Lomi House">Liam's Lomi House</option>
                        <option value="Lipa Bed and Breakfast, Inc.">Lipa Bed and Breakfast, Inc.</option>
                        <option value="Lipa City Hall Building">Lipa City Hall Building</option>
                        <option value="Lipa Grill Restaurant">Lipa Grill Restaurant</option>
                        <option value="Lomi King">Lomi King</option>
                        <option value="Lucia's Cafe">Lucia's Cafe</option>
                        <option value="Lucky 9 Lodge">Lucky 9 Lodge</option>
                        <option value="Mabini Boundary Lodge">Mabini Boundary Lodge</option>
                        <option value="Meaco Royal Hotel Inc.">Meaco Royal Hotel Inc.</option>
                        <option value="Mikabelle Kitchenette">Mikabelle Kitchenette</option>
                        <option value="Monument of Claro M. Recto">Monument of Claro M. Recto</option>
                        <option value="Mount Malarayat Golf and Country Club Hotel">Mount Malarayat Golf and Country Club Hotel</option>
                        <option value="Museo ng Lipa">Museo ng Lipa</option>
                        <option value="Nourish Well Being">Nourish Well Being</option>
                        <option value="Orchard Estate">Orchard Estate</option>
                        <option value="Our Lady of Mount Carmel Monastery">Our Lady of Mount Carmel Monastery</option>
                        <option value="Peace Tower">Peace Tower</option>
                        <option value="Plaza Independencia">Plaza Independencia</option>
                        <option value="Prism Cafe Resto">Prism Cafe Resto</option>
                        <option value="Ristorante D'Aby by Aurelio's">Ristorante D'Aby by Aurelio's</option>
                        <option value="Royal Palms Villas Palazzo Antonio">Royal Palms Villas Palazzo Antonio</option>
                        <option value="San Sebastian Cathedral">San Sebastian Cathedral</option>
                        <option value="Solano Hotel">Solano Hotel</option>
                        <option value="Super Mild Hotel Sosyal Place">Super Mild Hotel Sosyal Place</option>
                        <option value="The Beehive Farm and Kitchen">The Beehive Farm and Kitchen</option>
                        <option value="The Farm at San Benito">The Farm at San Benito</option>
                        <option value="The Zillion Builders Pavilion">The Zillion Builders Pavilion</option>
                        <option value="Vicentes Bahay Kainan at Kantahan">Vicentes Bahay Kainan at Kantahan</option>
                    </select>
                </div>
                
                <div class="filter">
                    <select id="month" name="month" onchange="filterResults()" aria-label="Filter by month">
                        <option value="">Months</option>
                        <option value="01">January</option>
                        <option value="02">February</option>
                        <option value="03">March</option>
                        <option value="04">April</option>
                        <option value="05">May</option>
                        <option value="06">June</option>
                        <option value="07">July</option>
                        <option value="08">August</option>
                        <option value="09">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
                
                <div class="filter">
                    <select id="year" name="year" onchange="filterResults()" aria-label="Filter by year">
                        <option value="">Years</option>
                        <option value="2023">2023</option>
                        <option value="2024">2024</option>
                        <option value="2025">2025</option>
                        <option value="2027">2027</option>
                        <option value="2028">2028</option>
                        <option value="2029">2029</option>
                        <option value="2030">2030</option>
                    </select>
                </div>
            </div>
        
            <div class="card--container">
                <div class="card--wrapper">
                    <!-- Recommendations Card -->
                    <div class="payment--card" data-tooltip="This section displays the total number of recommendations..." onclick="showModal('first-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ total_recommendations }}</span>
                                <span class="title">Recommendations</span>
                            </div>
                            <i class="fas fa-book icon"></i>
                        </div>
                    </div>
            
                    <!-- Views Card -->
                    <div class="payment--card" data-tooltip="This figure represents the total number of views..." onclick="showModal('second-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ total_logins }}</span>
                                <span class="title">Views</span>
                            </div>
                            <i class="fas fa-eye icon"></i>
                        </div>
                    </div>
            
                    <!-- Comments Card -->
                    <div class="payment--card" data-tooltip="Here you can view the total number of comments..." onclick="showModal('third-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ total_comments }}</span>
                                <span class="title">Comments</span>
                            </div>
                            <i class="fas fa-comment icon"></i>
                        </div>
                    </div>
            
                    <!-- 5 Star Rating Card -->
                    <div class="payment--card" data-tooltip="This metric highlights the number of 5-star ratings..." onclick="showModal('fourth-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ star_counts['5_star'] }}</span>
                                <span class="title">5 Star Rate</span>
                            </div>
                            <i class="fas fa-star icon"></i>
                        </div>
                    </div>
            
                    <!-- 4 Star Rating Card -->
                    <div class="payment--card" data-tooltip="This displays the total count of 4-star ratings..." onclick="showModal('fifth-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ star_counts['4_star'] }}</span>
                                <span class="title">4 Star Rate</span>
                            </div>
                            <i class="fas fa-star icon"></i>
                        </div>
                    </div>
            
                    <!-- 3 Star Rating Card -->
                    <div class="payment--card" data-tooltip="This count represents the number of 3-star ratings..." onclick="showModal('sixth-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ star_counts['3_star'] }}</span>
                                <span class="title">3 Star Rate</span>
                            </div>
                            <i class="fas fa-star icon"></i>
                        </div>
                    </div>
            
                    <!-- 2 Star Rating Card -->
                    <div class="payment--card" data-tooltip="This shows the total number of 2-star ratings..." onclick="showModal('seventh-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ star_counts['2_star'] }}</span>
                                <span class="title">2 Star Rate</span>
                            </div>
                            <i class="fas fa-star icon"></i>
                        </div>
                    </div>
            
                    <!-- 1 Star Rating Card -->
                    <div class="payment--card" data-tooltip="This represents the total number of 1-star ratings..." onclick="showModal('eight-modal')">
                        <div class="card--header">
                            <div class="amount">
                                <span class="amount--value">{{ star_counts['1_star'] }}</span>
                                <span class="title">1 Star Rate</span>
                            </div>
                            <i class="fas fa-star icon"></i>
                        </div>
                    </div>
                </div>
            
                <!-- Modals -->
                <div id="first-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('first-modal')">&times;</span>
                        <h2>Recommendations</h2>
                        <p><strong>Interpretation:</strong><br> Here are some personalized recommendations based on your preferences and previous selections.</p>
                        <p><strong>Explanation:</strong><br> These recommendations are tailored to your past interactions and preferences, helping you discover places that match your interests.</p>
                    </div>
                </div>

                <div id="second-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('second-modal')">&times;</span>
                        <h2>Views</h2>
                        <p><strong>Interpretation:</strong><br> Check out the best views available for your selected location or experience. Explore beautiful scenes!</p>
                        <p><strong>Explanation:</strong><br> This section highlights the most popular and breathtaking views from various locations, providing an immersive experience.</p>
                    </div>
                </div>

                <div id="third-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('third-modal')">&times;</span>
                        <h2>Comments</h2>
                        <p><strong>Interpretation:</strong><br> Read feedback and thoughts shared by others who have experienced this place or service.</p>
                        <p><strong>Explanation:</strong><br> User comments offer valuable insights into the experiences of others, helping you make informed decisions.</p>
                    </div>
                </div>

                <div id="fourth-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('fourth-modal')">&times;</span>
                        <h2>5 Stars</h2>
                        <p><strong>Interpretation:</strong><br> This location has received the highest rating! People absolutely love it. Here’s why.</p>
                        <p><strong>Explanation:</strong><br> A 5-star rating indicates excellent user satisfaction, suggesting that this location is highly recommended.</p>
                    </div>
                </div>

                <div id="fifth-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('fifth-modal')">&times;</span>
                        <h2>4 Stars</h2>
                        <p><strong>Interpretation:</strong><br> A great experience, with a few minor suggestions for improvement. Here's what others had to say.</p>
                        <p><strong>Explanation:</strong><br> While users were generally satisfied, a 4-star rating suggests there are small areas for improvement that could enhance the experience.</p>
                    </div>
                </div>

                <div id="sixth-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('sixth-modal')">&times;</span>
                        <h2>3 Stars</h2>
                        <p><strong>Interpretation:</strong><br> Decent, but with room for improvement. Here’s what needs attention from the community’s feedback.</p>
                        <p><strong>Explanation:</strong><br> A 3-star rating typically indicates a mixed experience, with both positive and negative feedback, suggesting room for improvement.</p>
                    </div>
                </div>

                <div id="seventh-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('seventh-modal')">&times;</span>
                        <h2>2 Stars</h2>
                        <p><strong>Interpretation:</strong><br> Some significant issues were raised by others. Consider alternatives or improvements for a better experience.</p>
                        <p><strong>Explanation:</strong><br> A 2-star rating often reflects dissatisfaction, and this feedback highlights areas where improvements are necessary to meet expectations.</p>
                    </div>
                </div>

                <div id="eight-modal" class="fmodal">
                    <div class="fmodal-content">
                        <span class="fclose-btn" onclick="closeModal('eight-modal')">&times;</span>
                        <h2>1 Star</h2>
                        <p><strong>Interpretation:</strong><br> Many users had negative experiences. Here’s a summary of the common complaints and concerns.</p>
                        <p><strong>Explanation:</strong><br> A 1-star rating reflects significant dissatisfaction, and this feedback points to major issues that require immediate attention.</p>
                    </div>
                </div>          
            </div>         
            
            
            <div class="chartcontainer">
                <div class="chart">
                    <div class="piechart-container">
                        <canvas id="ratingPieChart1"></canvas>
                    </div>
            
                    <script>
                        var starCounts = [
                            {{ star_counts['1_star'] }},
                            {{ star_counts['2_star'] }},
                            {{ star_counts['3_star'] }},
                            {{ star_counts['4_star'] }},
                            {{ star_counts['5_star'] }}
                        ];
                    
                        var totalVotes = starCounts.reduce((a, b) => a + b, 0);  // Calculate total votes for percentage calculation
                    
                        var ctx1 = document.getElementById('ratingPieChart1').getContext('2d');
                        var ratingPieChart1 = new Chart(ctx1, {
                            type: 'pie',
                            data: {
                                labels: ['1 Star', '2 Stars', '3 Stars', '4 Stars', '5 Stars'],
                                datasets: [{
                                    label: 'Overall Rating Summary',
                                    data: starCounts,
                                    backgroundColor: [
                                        'rgba(246, 109, 68)', 
                                        'rgba(254, 174, 101)', 
                                        'rgba(170, 222, 167)', 
                                        'rgba(100, 194, 166)', 
                                        'rgba(45, 135, 187)' 
                                    ]                                    
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    title: {
                                        display: true,
                                        text: 'Overall Rating Summary',
                                        font: {
                                            size: 18,
                                            weight: 'bold'
                                        },
                                        color: 'black'  
                                    },
                                    legend: {
                                        position: 'right',
                                        labels: {
                                            boxWidth: 20,
                                            padding: 15,
                                            color: 'black',
                                        }
                                    },
                                    tooltip: {
                                        backgroundColor: 'rgba(0, 0, 0, 0.8)', // Darker background for better readability
                                        titleFont: {
                                            size: 16,
                                            weight: 'bold',  // Optionally make the title bold
                                        },
                                        bodyFont: {
                                            size: 14,
                                            lineHeight: 1.5,  // Increased space between lines for clarity
                                        },
                                        displayColors: false, // Disables color box to avoid clutter
                                        padding: 15,  // Increased padding for better spacing around the text
                                        caretSize: 8,  // Optional: Adds a caret (arrow) to the tooltip
                                        cornerRadius: 5,  // Optional: Rounded corners for a smoother look
                                        maxWidth: null,  // Disable the max width limit
                                        width: '700',  // Allow width to grow based on the content
                                        callbacks: {
                                            label: function(tooltipItem) {
                                                var rating = tooltipItem.label;  // Get rating label (e.g., 1 Star, 2 Stars)
                                                var count = tooltipItem.raw;     // Get the count of votes for this rating
                                                var percentage = ((count / totalVotes) * 100).toFixed(2);  // Calculate percentage
                
                                                // Explanation based on rating
                                                var explanation = '';
                                                if (rating === '1 Star') {
                                                    explanation = 'This rating represents the lowest satisfaction.';
                                                } else if (rating === '5 Stars') {
                                                    explanation = 'This rating represents the highest satisfaction.';
                                                } else {
                                                    explanation = 'This rating indicates an average satisfaction level.';
                                                }
                
                                                return `${rating}: ${count} votes (${percentage}%) - ${explanation}`;
                                            }
                                        }
                                    }    
                                }
                            }
                        });
                    </script>                    
                </div>
                
                <div class="chart">
                    <div class="piechart-container">
                        <canvas id="genderPieChart"></canvas>
                    </div>
                
                    <script>
                        var genderCounts = [
                            {{ gender_data['male'] }},
                            {{ gender_data['female'] }},
                            {{ gender_data['others'] }},
                            {{ gender_data['prefer not'] }}
                        ];
                
                        var totalUsers = genderCounts.reduce((a, b) => a + b, 0);  // Total number of users for percentage calculations
                
                        var ctx = document.getElementById('genderPieChart').getContext('2d');
                        var genderPieChart = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: ['Male', 'Female', 'LGBTQIA+', 'Prefer not to say'],
                                datasets: [{
                                    label: 'Gender Distribution',
                                    data: genderCounts,
                                    backgroundColor: [
                                        'rgba(116, 187, 251)',  // Male
                                        'rgba(255, 169, 253)',  // Female
                                        'rgba(251, 226, 159)',  // LGBTQIA+
                                        'rgba(211, 211, 211)'   // Prefer not to say
                                    ],
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    title: {
                                        display: true,
                                        text: 'Gender Distribution',
                                        font: {
                                            size: 18,
                                            weight: 'bold'
                                        },
                                        color: 'black'
                                    },
                                    legend: {
                                        position: 'right',
                                        labels: {
                                            boxWidth: 20,
                                            padding: 15,
                                            color: 'black'
                                        }
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(tooltipItem) {
                                                var label = tooltipItem.label;
                                                var value = tooltipItem.raw;
                                                var percentage = ((value / totalUsers) * 100).toFixed(2);
                                                var explanation = "";
                
                                                switch (label) {
                                                    case 'Male':
                                                        explanation = `This represents ${percentage}% of the total users who identified as male.`;
                                                        break;
                                                    case 'Female':
                                                        explanation = `This represents ${percentage}% of the total users who identified as female.`;
                                                        break;
                                                    case 'LGBTQIA+':
                                                        explanation = `This represents ${percentage}% of the total users who identified as LGBTQIA+`;
                                                        break;
                                                    case 'Prefer not to say':
                                                        explanation = `This represents ${percentage}% of the total users who chose not to specify their gender.`;
                                                        break;
                                                }
                
                                                return `${label}: ${value} users (${percentage}%) - ${explanation}`;
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    </script>
                </div>
            
                <div class="chart">
                    <div class="piechart-container">
                        <canvas id="addressPieChart"></canvas>
                    </div>
                
                    <script>
                        var addressData = [
                            {{ address_data['residents'] }},
                            {{ address_data['visitors'] }}
                        ];
                
                        var ctx = document.getElementById('addressPieChart').getContext('2d');
                        var addressPieChart = new Chart(ctx, {
                            type: 'pie',
                            data: {
                                labels: ['Domestic', 'Foreign'],
                                datasets: [{
                                    label: 'Tourist Arrivals',
                                    data: addressData,
                                    backgroundColor: [
                                        'rgba(255, 105, 97)', 
                                        'rgba(119, 221, 119)' 
                                    ],
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    title: {
                                        display: true, 
                                        text: 'Tourist Arrivals', 
                                        font: {
                                            size: 18, 
                                            weight: 'bold'
                                        },
                                        color: 'black'
                                    },
                                    legend: {
                                        position: 'right',
                                        labels: {
                                            boxWidth: 20,
                                            padding: 15,
                                            color: 'black'
                                        }
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(tooltipItem) {
                                                // Default tooltip label
                                                let label = tooltipItem.label + ': ' + tooltipItem.raw + ' users';
                
                                                // Custom interpretation and explanation for the hovered segment
                                                if (tooltipItem.label === 'Domestic') {
                                                    label += ' - Domestic tourists who are residents of the area.';
                                                } else if (tooltipItem.label === 'Foreign') {
                                                    label += ' - Foreign tourists who are visiting the area.';
                                                }
                                                return label;
                                            }
                                        }
                                    }
                                },
                                hover: {
                                    onHover: function(event, chartElement) {
                                        if (chartElement.length) {
                                            // Change the cursor to a pointer when hovering over the chart
                                            event.native.target.style.cursor = 'pointer';
                
                                            // Optionally, you could display more detailed info in a specific area of your page
                                            const activeSegment = chartElement[0]._model;
                                            const dataIndex = activeSegment.index;
                                            const label = addressPieChart.data.labels[dataIndex];
                                            const count = addressData[dataIndex];
                                            const explanation = label === 'Domestic' 
                                                ? 'Domestic tourists are residents of the local area, contributing to the local economy.'
                                                : 'Foreign tourists are visitors from outside the country, often impacting tourism and local attractions.';
                                            // Display the explanation dynamically (e.g., in a designated area)
                                            document.getElementById('chart-explanation').innerText = explanation;
                                        }
                                    }
                                }
                            }
                        });
                    </script>
                
                    <!-- Area to display detailed explanation -->
                    <div id="chart-explanation" style="margin-top: 20px; font-size: 16px; color: black;"></div>
                </div>
            </div>

            <div class="chartcontainerA">
                <div id="chamodal" class="chamodal">
                    <div class="chamodal-content">
                        <span class="chamodal-close" onclick="closeChamodal()">&times;</span>
                        <p>No data available for the selected year.</p>
                    </div>
                </div>
                
                <div class="chartA">
                    <div class="filter-container">
                        <select id="yearFilter" onchange="filterChart()">
                            <option value="y1">2024</option>
                            <option value="y2">2025</option>
                            <option value="y3">2026</option>
                            <option value="y4">2027</option>
                        </select>
                    </div>
                
                    <div class="linechart-container">
                        <canvas id="sayoGalitLineChart"></canvas>
                    </div>
                
                    <script>
                        // Pass the data to JavaScript
                        var sayoGalitData = {{ monthly_visitors|tojson }}; 
                
                        var ctx = document.getElementById('sayoGalitLineChart').getContext('2d');
                        var sayoGalitLineChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                                datasets: [{
                                    label: 'Visitors',
                                    data: sayoGalitData,
                                    fill: false,
                                    borderColor: 'rgba(255, 105, 97)',
                                    borderWidth: 2,
                                    pointRadius: 5,
                                    pointBackgroundColor: 'rgba(255, 105, 97)',
                                    pointHoverRadius: 7,
                                    pointHoverBackgroundColor: 'rgba(75, 192, 192, 0.8)'
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    title: {
                                        display: true,
                                        text: 'Months with the Most Visitors',
                                        font: {
                                            size: 18,
                                            weight: 'bold',
                                        },
                                        color: 'black'
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(tooltipItem) {
                                                var month = tooltipItem.label;
                                                var count = tooltipItem.raw;
                
                                                // Month-specific interpretations
                                                var interpretation = '';
                                                switch (month) {
                                                    case 'Jan':
                                                        interpretation = 'January typically sees the start of the tourist season, with many people visiting after the New Year holidays.';
                                                        break;
                                                    case 'Feb':
                                                        interpretation = 'February might attract visitors due to cooler weather and special events like Valentine\'s Day.';
                                                        break;
                                                    case 'Mar':
                                                        interpretation = 'March often brings a rise in visitors due to spring break vacations.';
                                                        break;
                                                    case 'Apr':
                                                        interpretation = 'April sees higher numbers as tourists take advantage of the Easter holidays.';
                                                        break;
                                                    case 'May':
                                                        interpretation = 'May is a peak month with many travelers enjoying the start of summer vacations.';
                                                        break;
                                                    case 'Jun':
                                                        interpretation = 'June marks the beginning of summer in many countries, attracting family travelers.';
                                                        break;
                                                    case 'Jul':
                                                        interpretation = 'July typically has the highest numbers, as schools are out and families travel for summer breaks.';
                                                        break;
                                                    case 'Aug':
                                                        interpretation = 'August remains a popular month, especially for those taking their vacations later in the summer.';
                                                        break;
                                                    case 'Sep':
                                                        interpretation = 'September sees a decline in visitors, as schools reopen and summer vacations end.';
                                                        break;
                                                    case 'Oct':
                                                        interpretation = 'October marks a shift, with cooler weather attracting tourists looking for fall activities.';
                                                        break;
                                                    case 'Nov':
                                                        interpretation = 'November brings fewer visitors, as many people prepare for the holiday season or travel to other destinations.';
                                                        break;
                                                    case 'Dec':
                                                        interpretation = 'December sees a rise again due to the holiday season, with tourists visiting for Christmas and New Year celebrations.';
                                                        break;
                                                    default:
                                                        interpretation = 'No data available for this month.';
                                                }
                
                                                return month + ': ' + count + ' visitors - ' + interpretation;
                                            }
                                        },
                                        titleFont: {
                                            color: 'black'
                                        },
                                        bodyFont: {
                                            color: 'black'
                                        }
                                    }
                                },
                                scales: {
                                    x: {
                                        beginAtZero: true,
                                        ticks: {
                                            color: 'black'
                                        }
                                    },
                                    y: {
                                        beginAtZero: true,
                                        ticks: {
                                            color: 'black'
                                        }
                                    }
                                }
                            }
                        });
                
                        function filterChart() {
                            var selectedYear = document.getElementById('yearFilter').value;
                
                            // If 2024 is selected, update the chart with the data for 2024
                            if (selectedYear === 'y1') {
                                sayoGalitLineChart.data.datasets[0].data = sayoGalitData;
                            } else {
                                // Clear the chart or display a message for unavailable years (2025, 2026, 2027)
                                sayoGalitLineChart.data.datasets[0].data = [];
                                sayoGalitLineChart.update();
                                openChamodal();  // Show chamodal when no data is available
                            }
                
                            // Update the chart to reflect changes
                            sayoGalitLineChart.update();
                        }
                
                        function openChamodal() {
                            document.getElementById("chamodal").style.display = "block";
                        }
                
                        // Function to close the chamodal
                        function closeChamodal() {
                            document.getElementById("chamodal").style.display = "none";
                        }
                
                        window.onclick = function(event) {
                            // Close modal if user clicks anywhere outside of it
                            if (event.target === document.getElementById("chamodal")) {
                                closeChamodal();
                            }
                        }
                    </script>
                </div>
                
                <div class="chartB">
                    <div class="barchart-container">
                        <canvas id="placeChartB"></canvas>
                    </div>
                    <script>
                        var ctx5 = document.getElementById('placeChartB').getContext('2d');
                        var placeChartB = new Chart(ctx5, {
                            type: 'bar',  
                            data: {
                                labels: {{ place_names | tojson }},
                                datasets: [{
                                    label: 'Number of Users Visited',
                                    data: {{ visit_counts | tojson }},
                                    backgroundColor: 'rgba(119, 221, 119)',
                                    borderColor: 'rgba(119, 221, 119)',
                                    borderWidth: 1,
                                    barPercentage: 0.8, 
                                    categoryPercentage: 0.8 
                                }]
                            },
                            options: {
                                responsive: true,
                                indexAxis: 'y', 
                                scales: {
                                    x: {
                                        beginAtZero: true,
                                        ticks: {
                                            color: 'black'  // Set x-axis labels to black
                                        }
                                    },
                                    y: {
                                        position: 'left',
                                        ticks: {
                                            color: 'black'  // Set y-axis labels to black
                                        }
                                    }
                                },
                                plugins: {
                                    title: {
                                        display: true,
                                        text: 'Adventurer Visits to This Place',
                                        font: {
                                            size: 18,
                                            weight: 'bold'
                                        },
                                        color: 'black'  // Set title font color to black
                                    },
                                    legend: {
                                        position: 'bottom',
                                        labels: {
                                            boxWidth: 20,
                                            padding: 15,
                                            color: 'black'  // Set legend font color to black
                                        }
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(tooltipItem) {
                                                var place = tooltipItem.label;
                                                var visitCount = tooltipItem.raw;
                    
                                                // Interpretation based on the number of visitors
                                                var interpretation = '';
                                                if (visitCount < 50) {
                                                    interpretation = 'This place has fewer visits, possibly due to lower visibility or fewer attractions.';
                                                } else if (visitCount >= 50 && visitCount <= 200) {
                                                    interpretation = 'This place seems moderately popular, attracting a good number of visitors.';
                                                } else {
                                                    interpretation = 'This place is highly popular, with a large number of adventurers visiting regularly.';
                                                }
                    
                                                return place + ': ' + visitCount + ' visitors - ' + interpretation;
                                            }
                                        },
                                        titleFont: {
                                            color: 'black'
                                        },
                                        bodyFont: {
                                            color: 'black'
                                        }
                                    }
                                }
                            }
                        });
                    </script>
                </div>
            </div>

            <div class="chartcontainerB">
                <div class="filter-container">
                    <select id="destination" onchange="filterResults()">
                        <option value="">Destinations</option>
                        <option value="Amalfi718 Hotel">Amalfi718 Hotel</option>
                        <option value="Andros Lodging">Andros Lodging</option>
                        <option value="Anfa Hotel">Anfa Hotel</option>
                        <option value="Aquamarine Hotel">Aquamarine Hotel</option>
                        <option value="Archbishop Residence">Archbishop Residence</option>
                        <option value="Baryoe Pamilya">Baryoe Pamilya</option>
                        <option value="Base Cafe Steakhouse and Bar">Base Cafe Steakhouse and Bar</option>
                        <option value="Blue Sapphire">Blue Sapphire</option>
                        <option value="Cafe de Lipa">Cafe de Lipa</option>
                        <option value="Casa de Segunda">Casa de Segunda</option>
                        <option value="Casa Marikit Ristorante Italiano">Casa Marikit Ristorante Italiano</option>
                        <option value="Casa Ysabel by Solano">Casa Ysabel by Solano</option>
                        <option value="Chef Chateau">Chef Chateau</option>
                        <option value="Deer Hotel">Deer Hotel</option>
                        <option value="De La Salle Lipa">De La Salle Lipa</option>
                        <option value="Dulli Transient House">Dulli Transient House</option>
                        <option value="D'Ursi Pizza">D'Ursi Pizza</option>
                        <option value="El Grande Residencia Hotel">El Grande Residencia Hotel</option>
                        <option value="Fernando Air Base">Fernando Air Base</option>
                        <option value="Hapag Filipino Restaurant">Hapag Filipino Restaurant</option>
                        <option value="Hotel 1925">Hotel 1925</option>
                        <option value="Hotel ni Mang Jose">Hotel ni Mang Jose</option>
                        <option value="Imprenta Modern Filipino Cuisine">Imprenta Modern Filipino Cuisine</option>
                        <option value="Irori’s Japanese Restaurant">Irori’s Japanese Restaurant</option>
                        <option value="JET Hotel">JET Hotel</option>
                        <option value="Kahariam">Kahariam</option>
                        <option value="Kubli Lodge">Kubli Lodge</option>
                        <option value="Kurvada Motorist">Kurvada Motorist</option>
                        <option value="Liam's Lomi House">Liam's Lomi House</option>
                        <option value="Lipa Bed and Breakfast, Inc.">Lipa Bed and Breakfast, Inc.</option>
                        <option value="Lipa City Hall Building">Lipa City Hall Building</option>
                        <option value="Lipa Grill Restaurant">Lipa Grill Restaurant</option>
                        <option value="Lomi King">Lomi King</option>
                        <option value="Lucia's Cafe">Lucia's Cafe</option>
                        <option value="Lucky 9 Lodge">Lucky 9 Lodge</option>
                        <option value="Mabini Boundary Lodge">Mabini Boundary Lodge</option>
                        <option value="Meaco Royal Hotel Inc.">Meaco Royal Hotel Inc.</option>
                        <option value="Mikabelle Kitchenette">Mikabelle Kitchenette</option>
                        <option value="Monument of Claro M. Recto">Monument of Claro M. Recto</option>
                        <option value="Mount Malarayat Golf and Country Club Hotel">Mount Malarayat Golf and Country Club Hotel</option>
                        <option value="Museo ng Lipa">Museo ng Lipa</option>
                        <option value="Nourish Well Being">Nourish Well Being</option>
                        <option value="Orchard Estate">Orchard Estate</option>
                        <option value="Our Lady of Mount Carmel Monastery">Our Lady of Mount Carmel Monastery</option>
                        <option value="Peace Tower">Peace Tower</option>
                        <option value="Plaza Independencia">Plaza Independencia</option>
                        <option value="Prism Cafe Resto">Prism Cafe Resto</option>
                        <option value="Ristorante D'Aby by Aurelio's">Ristorante D'Aby by Aurelio's</option>
                        <option value="Royal Palms Villas Palazzo Antonio">Royal Palms Villas Palazzo Antonio</option>
                        <option value="San Sebastian Cathedral">San Sebastian Cathedral</option>
                        <option value="Solano Hotel">Solano Hotel</option>
                        <option value="Super Mild Hotel Sosyal Place">Super Mild Hotel Sosyal Place</option>
                        <option value="The Beehive Farm and Kitchen">The Beehive Farm and Kitchen</option>
                        <option value="The Farm at San Benito">The Farm at San Benito</option>
                        <option value="The Zillion Builders Pavilion">The Zillion Builders Pavilion</option>
                        <option value="Vicentes Bahay Kainan at Kantahan">Vicentes Bahay Kainan at Kantahan</option>
                    </select>

                    <select id="star_rate" onchange="filterChart()">
                        <option value="all">All Ratings</option>
                        <option value="1">1 Star</option>
                        <option value="2">2 Stars</option>
                        <option value="3">3 Stars</option>
                        <option value="4">4 Stars</option>
                        <option value="5">5 Stars</option>
                    </select>
                </div>
                
                <div class="chartC">
                    <div class="ratings-chart-container">
                        <canvas id="ratingsChart"></canvas>
                    </div>
                    <div id="interpretation" class="chart-interpretation"></div>
                
                    <script>
                        const ratingsData = {{ ratings_per_place | tojson }};
                
                        const labels = ratingsData.map(item => item[0]);
                        const oneStar = ratingsData.map(item => item[1]);
                        const twoStar = ratingsData.map(item => item[2]);
                        const threeStar = ratingsData.map(item => item[3]);
                        const fourStar = ratingsData.map(item => item[4]);
                        const fiveStar = ratingsData.map(item => item[5]);
                
                        // Prepare chart data
                        const data = {
                            labels: labels,
                            datasets: [
                                {
                                    label: '1 Star',
                                    backgroundColor: 'rgba(255, 236, 33)',
                                    data: oneStar
                                },
                                {
                                    label: '2 Stars',
                                    backgroundColor: 'rgba(55, 138, 255)',
                                    data: twoStar
                                },
                                {
                                    label: '3 Stars',
                                    backgroundColor: 'rgba(147, 240, 59)',
                                    data: threeStar
                                },
                                {
                                    label: '4 Stars',
                                    backgroundColor: 'rgba(245, 79, 82)',
                                    data: fourStar
                                },
                                {
                                    label: '5 Stars',
                                    backgroundColor: 'rgba(255, 163, 47)',
                                    data: fiveStar
                                }
                            ]
                        };
                
                        // Chart configuration
                        const config = {
                            type: 'bar',
                            data: data,
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    legend: {
                                        position: 'top',
                                        labels: {
                                            color: 'black'
                                        }
                                    },
                                    title: {
                                        display: true,
                                        text: 'Star Ratings per Place',
                                        font: {
                                            size: 18,
                                            weight: 'bold'
                                        },
                                        color: 'black'
                                    },
                                    tooltip: {
                                        callbacks: {
                                            label: function(tooltipItem) {
                                                const placeIndex = tooltipItem.dataIndex;
                                                const placeName = labels[placeIndex];
                                                const totalRatings = oneStar[placeIndex] + twoStar[placeIndex] + threeStar[placeIndex] + fourStar[placeIndex] + fiveStar[placeIndex];
                                                const averageRating = (
                                                    (1 * oneStar[placeIndex]) +
                                                    (2 * twoStar[placeIndex]) +
                                                    (3 * threeStar[placeIndex]) +
                                                    (4 * fourStar[placeIndex]) +
                                                    (5 * fiveStar[placeIndex])
                                                ) / totalRatings;
                
                                                // Generate interpretation based on the average rating
                                                let interpretation = '';
                                                if (averageRating < 2) {
                                                    interpretation = `The ratings for ${placeName} are generally low, indicating user dissatisfaction.`;
                                                } else if (averageRating >= 2 && averageRating < 4) {
                                                    interpretation = `The ratings for ${placeName} are mixed, showing moderate feedback.`;
                                                } else {
                                                    interpretation = `The ratings for ${placeName} are high, reflecting overall satisfaction.`;
                                                }
                
                                                return `${tooltipItem.raw} ratings - ${interpretation}`;
                                            }
                                        }
                                    }
                                },
                                scales: {
                                    x: {
                                        title: {
                                            display: true,
                                            text: 'Places',
                                            color: 'black'
                                        },
                                        ticks: {
                                            color: 'black'
                                        }
                                    },
                                    y: {
                                        title: {
                                            display: true,
                                            text: 'Number of Ratings',
                                            color: 'black'
                                        },
                                        ticks: {
                                            color: 'black'
                                        },
                                        beginAtZero: true
                                    }
                                }
                            }
                        };
                
                        function filterChart() {
                            const selectedRating = document.getElementById('star_rate').value;
                
                            let filteredRatingsData = ratingsData;
                
                            if (selectedRating !== 'all') {
                                filteredRatingsData = ratingsData.filter(item => item[selectedRating] > 0); // Filter based on selected star rating
                            }
                
                            // Prepare filtered chart data
                            const labels = filteredRatingsData.map(item => item[0]);
                            const oneStar = filteredRatingsData.map(item => item[1]);
                            const twoStar = filteredRatingsData.map(item => item[2]);
                            const threeStar = filteredRatingsData.map(item => item[3]);
                            const fourStar = filteredRatingsData.map(item => item[4]);
                            const fiveStar = filteredRatingsData.map(item => item[5]);
                
                            // Update chart data
                            ratingsChart.data.labels = labels;
                            ratingsChart.data.datasets[0].data = oneStar;
                            ratingsChart.data.datasets[1].data = twoStar;
                            ratingsChart.data.datasets[2].data = threeStar;
                            ratingsChart.data.datasets[3].data = fourStar;
                            ratingsChart.data.datasets[4].data = fiveStar;
                
                            // Update chart with new data
                            ratingsChart.update();
                        }
                
                        const ratingsChart = new Chart(document.getElementById('ratingsChart'), config);
                    </script>
                </div>
            </div>
           
            <!--
            <div class="tabular--wrapper">
                <h3 class="main--title">Comments Data</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Tourist ID</th>
                                <th>Adventurer ID</th>
                                <th>Gender</th>
                                <th>Contact Number</th>
                                <th>Address</th>
                                <th>Age</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in user_profiles %}
                            <tr>
                                <td>{{ user[0] }}</td>
                                <td>{{ user[1] }}</td>
                                <td>{{ user[2] }}</td>
                                <td>{{ user[3] }}</td>
                                <td>{{ user[4] }}</td>
                                <td>{{ user[5] }}</td>
                                <td>
                                    <button class="edit-btn" data-id="1">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="delete-btn">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        
            <div id="editModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn">&times;</span>
                    <h2>Adventurer Information</h2>
                    <form id="editForm">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" required><br>
                        <label for="address">Address:</label>
                        <input type="text" id="address" name="address" required><br>
                        <label for="contact">Contact Number:</label>
                        <input type="text" id="contact" name="contact" required><br>
                        <label for="age">Age:</label>
                        <input type="number" id="age" name="age" required><br>
                        <label for="place">Place:</label>
                        <input type="text" id="place" name="place" required><br>
                        <button type="submit" class="save-btn">Save Changes</button>
                    </form>
                </div>
            </div>
            -->
        </div>
    </div>

    <script>
    //toggle btn
    const hamBurger = document.querySelector(".toggle-btn");

    hamBurger.addEventListener("click", function () {
    document.querySelector("#sidebar").classList.toggle("expand");
    });

    //date and time
    const WEEK = ["SUN", "MON", "TUE", "WED", "THU", "FRI", "SAT"];

    function updateTime() {
    var now = new Date();

    let hours = now.getHours();
    let minutes = zeroPadding(now.getMinutes(), 2);
    let seconds = zeroPadding(now.getSeconds(), 2);
    let period = hours >= 12 ? "PM" : "AM";

    // Convert to 12-hour format
    hours = hours % 12 || 12; // Convert hour "0" to "12" for 12 AM/PM

    document.getElementById("time").innerText =
        zeroPadding(hours, 2) + ":" + minutes + ":" + seconds + " " + period;

    document.getElementById("date").innerText =
        now.getFullYear() + "-" +
        zeroPadding(now.getMonth() + 1, 2) + "-" +
        zeroPadding(now.getDate(), 2) + " " +
        WEEK[now.getDay()];
    }

    updateTime();
    setInterval(updateTime, 1000);

    function zeroPadding(num, digit) {
    return num.toString().padStart(digit, '0');
    }

    //filter destination, month, year
    function filterResults() {
        const destination = document.getElementById('destination').value;
        const month = document.getElementById('month').value;
        const year = document.getElementById('year').value;
    
        // Create an object to hold the filter criteria
        const filters = {
            destination: destination,
            month: month,
            year: year
        };
    
        // Make an AJAX request to the server
        fetch('/filter', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(filters)
        })
        .then(response => response.json())
        .then(data => {            
            updateUI(data);
        })
        .catch(error => console.error('Error:', error));
    }
    
    function updateUI(data) {
        
    }

    //edit or update rating
    /*
    var modal = document.getElementById("editModal");
    var editButtons = document.querySelectorAll(".edit-btn");
    var closeBtn = document.querySelector(".close-btn");

    editButtons.forEach(button => {
        button.addEventListener("click", function () {
            modal.style.display = "flex"; 

            var row = this.closest("tr");
            document.getElementById("name").value = row.children[1].innerText;
            document.getElementById("address").value = row.children[2].innerText;
            document.getElementById("contact").value = row.children[3].innerText;
            document.getElementById("age").value = row.children[4].innerText;
            document.getElementById("place").value = row.children[6].innerText;
        });
    });

    closeBtn.onclick = function () {
        closeModal();
    }

    window.onclick = function (event) {
        if (event.target == modal) {
            closeModal();
        }
    }

    window.addEventListener('keydown', function (event) {
        if (event.key === "Escape") {
            closeModal();
        }
    });

    function closeModal() {
        modal.style.display = "none";
        document.getElementById("editForm").reset(); 
    }
    */

    // Function to show the modal
    function showModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.style.display = 'block';
    }

    // Function to close the modal
    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.style.display = 'none';
    }

    // Close the modal when clicking outside of it
    window.onclick = function(event) {
        if (event.target.classList.contains('fmodal')) {
            const modal = event.target;
            modal.style.display = 'none';
        }
    };
    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>
</html>
